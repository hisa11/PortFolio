<svg width="700" height="400" xmlns="http://www.w3.org/2000/svg">
    <style>
        .label { font-family: 'Noto Sans JP', sans-serif; font-size: 16px; font-weight: bold; }
        .node-label { font-family: 'Noto Sans JP', sans-serif; font-size: 12px; }
        .arrow { stroke: #333; stroke-width: 1.5; marker-end: url(#arrowhead); }
        .dashed-arrow { stroke: #333; stroke-width: 1.5; stroke-dasharray: 5,5; marker-end: url(#arrowhead); }
        .p2p-line { stroke: #ff6b6b; stroke-width: 3; }
    </style>
    <defs>
        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
        </marker>
    </defs>

    <text x="300" y="30" class="label">WebRTC 通信フロー</text>

    <!-- Peers -->
    <rect x="50" y="150" width="100" height="50" rx="10" fill="#6be585" />
    <text x="85" y="180" class="node-label">ピアA</text>
    <rect x="550" y="150" width="100" height="50" rx="10" fill="#6be585" />
    <text x="585" y="180" class="node-label">ピアB</text>

    <!-- Signaling Server -->
    <rect x="300" y="80" width="100" height="50" rx="10" fill="#31aae2" />
    <text x="310" y="110" class="node-label">シグナリングサーバー</text>

    <!-- STUN/TURN Server -->
    <rect x="300" y="250" width="100" height="50" rx="10" fill="#f59e0b" />
    <text x="310" y="280" class="node-label">STUN/TURN</text>

    <!-- Signaling Path -->
    <path d="M 150,160 Q 250,100 300,100" fill="none" class="dashed-arrow" />
    <text x="200" y="120" class="node-label">1. 接続情報(SDP)交換</text>
    <path d="M 400,100 Q 450,100 550,160" fill="none" class="dashed-arrow" />

    <!-- STUN Path -->
    <path d="M 150,190 Q 250,260 300,270" fill="none" class="arrow" />
    <text x="180" y="240" class="node-label">2. IPアドレス確認</text>
    <path d="M 550,190 Q 450,260 400,270" fill="none" class="arrow" />

    <!-- P2P Connection -->
    <path d="M 150,175 H 550" fill="none" class="p2p-line" />
    <text x="320" y="170" class="node-label">3. P2P接続確立</text>

</svg>